global:
  domain: bank.practicum.local
  kafka:
    bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"
    topic: "apache-logs"
    groupId: "logstash-group"
    autoOffsetReset: "earliest"

  elasticsearch:
    hosts:
      - "http://{{ .Release.Name }}-elasticsearch:9200"
    indexPrefix: "apache-logs-%{+YYYY.MM.dd}"

  logstash:
    image:
      repository: docker.elastic.co/logstash/logstash
      tag: 8.11.1
    resources:
      requests:
        memory: "512Mi"
        cpu: "500m"
      limits:
        memory: "1Gi"
        cpu: "1"
# Configuration for the kafka subchart
kafka:
  enabled: true
  replicaCount: 1
  persistence:
    size: 20Gi
  auth:
    enabled: false

# Configuration for the front-ui service subchart
front-ui:
  replicaCount: 1
  image:
    repository: front-ui
    tag: "0.0.1-SNAPSHOT"
    pullPolicy: IfNotPresent
    # -----------------------------
  service:
    type: ClusterIP
    port: 8080
  ingress:
    enabled: true
    className: "nginx"
    hosts:
      - host: front-ui.bank.practicum.local
        paths:
          - path: /
            pathType: ImplementationSpecific
  kafka:
    bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"

# Configuration for the accounts service subchart
accounts:
  replicaCount: 1
  image:
    repository: accounts
    tag: "0.0.1-SNAPSHOT"
    pullPolicy: IfNotPresent
    # -----------------------------
  service:
    type: ClusterIP
    port: 8081
    #  config:
    # --- CORRECTED DB URL --- Using '<ReleaseName>-<Alias>' service name convention
    #    database_url: "jdbc:postgresql://bank-postgresql:5432/bank-db"
    database_username: "postgresql"
    database_password: "postgresql"
    # database_password_secret: "{{ .Release.Name }}-bank-db-postgresql" # Reference to secret created by DB chart
    # database_password_secret_key: "postgresql-password" # Key within the secret
    kafka:
      bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"

# Configuration for the bank-db (PostgreSQL dependency)
# Values here are prefixed according to the Bitnami PostgreSQL chart's structure
# Check the Bitnami chart's values.yaml for all available options
bank-db:
  enabled: true
  # Override values from the official postgresql chart
  auth:
    database: bank-db
    username: "postgresql"
    # Use existingSecret or provide password (less secure for production)
    # existingSecret: "{{ .Release.Name }}-bank-db-postgresql" # Name of the secret to use/create
    password: "postgresql" # Example: Not recommended for production
  primary:
    persistence:
      enabled: true
      size: 1Gi

# Configuration for the exchange service subchart
exchange:
  replicaCount: 1
  image:
    repository: exchange
    tag: "0.0.1-SNAPSHOT"
    pullPolicy: IfNotPresent
    # -----------------------------
  service:
    type: ClusterIP
    port: 8084
    #  config:
    # --- CORRECTED DB URL --- Using '<ReleaseName>-<Alias>' service name convention
    #    database_url: "jdbc:postgresql://exchange-postgresql:5432/exchange-db"
    database_username: "postgresql"
    database_password: "postgresql"
    # database_password_secret: "{{ .Release.Name }}-exchange-db-postgresql" # Reference to secret created by DB chart
    # database_password_secret_key: "postgresql-password" # Key within the secret
  kafka:
    bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"

# Configuration for the exchange-db (PostgreSQL dependency)
# Values here are prefixed according to the Bitnami PostgreSQL chart's structure
# Check the Bitnami chart's values.yaml for all available options
exchange-db:
  enabled: true
  # Override values from the official postgresql chart
  auth:
    database: exchange-db
    username: "postgresql"
    # Use existingSecret or provide password (less secure for production)
    # existingSecret: "{{ .Release.Name }}-exchange-db-postgresql" # Name of the secret to use/create
    password: "postgresql" # Example: Not recommended for production
  primary:
    persistence:
      enabled: true
      size: 1Gi

# Configuration for the blocker service subchart
blocker:
  replicaCount: 1
  image:
    repository: blocker
    tag: "0.0.1-SNAPSHOT"
    pullPolicy: IfNotPresent
    # -----------------------------
  service:
    type: ClusterIP
    port: 8082
  kafka:
    bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"
# Configuration for the cash service subchart
cash:
  replicaCount: 1
  image:
    repository: blocker
    tag: "0.0.1-SNAPSHOT"
    pullPolicy: IfNotPresent
    # -----------------------------
  service:
    type: ClusterIP
    port: 8083
  kafka:
    bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"

# Configuration for the exchange-generator service subchart
exchange-generator:
  replicaCount: 1
  image:
    repository: exchange-generator
    tag: "0.0.1-SNAPSHOT"
    pullPolicy: IfNotPresent
    # -----------------------------
  service:
    type: ClusterIP
    port: 8085
  kafka:
    bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"

# Configuration for the notifications service subchart
notifications:
  replicaCount: 1
  image:
    repository: blocker
    tag: "0.0.1-SNAPSHOT"
    pullPolicy: IfNotPresent
    # -----------------------------
  service:
    type: ClusterIP
    port: 8086
  kafka:
    bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"

# Configuration for the transfer service subchart
transfer:
  replicaCount: 1
  image:
    repository: blocker
    tag: "0.0.1-SNAPSHOT"
    pullPolicy: IfNotPresent
    # -----------------------------
  service:
    type: ClusterIP
    port: 8087
  kafka:
    bootstrapServers: "kafka-headless.default.svc.cluster.local:9092"

zipkin:
  endpoint: http://zipkin.bank.practicum.svc.cluster.local:9411/api/v2/spans

prometheus:
  enabled: true
  service:
    type: ClusterIP
  prometheus:
    resources:
      requests:
        memory: 512Mi
        cpu: 500m

grafana:
  enabled: true
  admin:
    password: "password"
  persistence:
    enabled: true
  service:
    type: ClusterIP

elasticsearch:
  enabled: true
  elasticsearch:
    replicas: 1
    resources:
      requests:
        memory: 2Gi
        cpu: 1

kibana:
  enabled: true
  service:
    type: ClusterIP

logstash:
  enabled: true
  logstash:
    resources:
      requests:
        memory: 1Gi
        cpu: 500m